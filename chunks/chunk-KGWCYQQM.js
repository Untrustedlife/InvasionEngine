var E=(e,t,n)=>Math.max(t,Math.min(n,e)),b=Math.PI*2;var m=[{index:"officewall",image:"OfficeWall.png"},{index:"panel",image:"Panel.png"},{index:"hedge",image:"Hedge.png"},{index:"door",image:"OfficeDoor.png"},{index:"elevator",image:"Portal.png"},{index:"bluedoor",image:"OfficeDoorBlue.png"},{index:"field",image:"Field.png"}],f={0:{name:"empty",textures:[{0:"empty"}],height:0,collide:!1,miniMapColor:"#0c1220"},1:{name:"officewall",textures:[{0:"officewall"}],height:1,collide:!0,miniMapColor:"#ECDE60"},2:{name:"panel",textures:[{0:"panel"}],height:1,collide:!0,miniMapColor:"#707a88"},3:{name:"hedge",textures:[{0:"hedge"}],height:1,collide:!0,miniMapColor:"#00e676"},4:{name:"door",textures:[{0:"door"}],height:1,collide:!0,miniMapColor:"#996633"},5:{name:"elevator",textures:[{0:"elevator"}],height:1,collide:!1,miniMapColor:"#FFE300"},6:{name:"bluedoor",textures:[{0:"bluedoor"}],height:1,collide:!1,miniMapColor:"#3561ff"},7:{name:"field",textures:[{0:"field"}],height:1,collide:!0,miniMapColor:"#00FFFF"},9:{name:"bluedoor",textures:[{0:"bluedoor",1:"officewall",2:"officewall"}],height:3,collide:!1,miniMapColor:"#3561ff"},8:{name:"tallwall",textures:[{0:"officewall",1:"officewall",2:"officewall"}],height:3,collide:!0,miniMapColor:"#ECDE90"}};function h(e=64,t=64){return new OffscreenCanvas(e,t)}var s={empty:null},L={...f};function p(e){let n=e.getContext("2d").getImageData(0,0,e.width,e.height),i=[];for(let o=0;o<e.width;o++){let a=new Uint8ClampedArray(e.height*4);for(let l=0;l<e.height;l++){let r=(l*e.width+o)*4,c=l*4;a[c]=n.data[r],a[c+1]=n.data[r+1],a[c+2]=n.data[r+2],a[c+3]=n.data[r+3]}i.push({data:a,h:e.height})}return{cols:i,w:e.width,h:e.height}}var u=Array.from({length:82},(e,t)=>t*.0125),g={},d=Object.fromEntries(Object.entries(s).map(([e,t])=>[e,t?p(t):null]));function x(){for(let e of Object.keys(d))delete d[e];for(let[e,t]of Object.entries(s))d[e]=t?p(t):null}function w(){for(let[e,t]of Object.entries(s))if(t){g[e]={};for(let n of u){let i=new OffscreenCanvas(t.width,t.height),o=i.getContext("2d");o.drawImage(t,0,0);let a=n*255|0;o.globalCompositeOperation="multiply",o.fillStyle=`rgb(${a},${a},${a})`,o.fillRect(0,0,i.width,i.height),g[e][n]=i}}}async function y(e){let t=`../assets/gfx/${e}`;return new Promise((n,i)=>{let o=new Image;o.onload=()=>{let a=h(64,64),l=a.getContext("2d",{willReadFrequently:!0});l.imageSmoothingEnabled=!1,l.drawImage(o,0,0,64,64),n(a)},o.onerror=()=>i(new Error(`Failed to load texture: ${t}`)),o.src=t})}async function P(){try{await C(m),x(),w()}catch(e){console.warn("Failed to init wall textures:",e)}}async function C(e){if(!Array.isArray(e)){console.warn("Expected an array of { index, image } objects. In loadImagesToReplaceTextures");return}let t=e.map(async(n,i)=>{let{index:o,image:a}=n||{};try{let l=await y(a);return s[o]=l,l}catch(l){return console.warn(`Failed to load texture "${a}" for index ${o} and dont support replacing with cool gmod missing texture:`,l),null}});await Promise.all(t)}var _=Object.freeze({entity:"entity",ball:"ball",sparkle:"sparkle",barrel:"barrel",food:"food",key:"key"});export{E as a,b,s as c,L as d,u as e,g as f,d as g,P as h,_ as i};
